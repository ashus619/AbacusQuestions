# -*- coding: utf-8 -*-
"""Abacus Questionnaire.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/11x2Tmk6sRytQ5AgC374JGoxTXgB8z4T-
"""

import streamlit as st
import random

# Abacus Question Generator Code
def generate_question():
    num1 = random.randint(1, 99)
    num2 = random.randint(1, 99)
    operation = random.choice(['+', '-'])
    question = f"{num1} {operation} {num2}"
    answer = eval(question)
    return question, answer

# Check if questions are already generated in session state
if 'questions' not in st.session_state:
    # Generate 10 questions if not already generated
    st.session_state.questions = [generate_question() for _ in range(10)]

if 'user_answers' not in st.session_state:
    # Initialize user answers storage in session state
    st.session_state.user_answers = {f"question_{i}": None for i in range(10)}

# Display all questions at once
st.title("Abacus Question Paper")

# Iterate through questions and display them
for idx, (question, correct_answer) in enumerate(st.session_state.questions):
    user_answer = st.radio(f"Question {idx + 1}: {question}",
                           options=[correct_answer - 1, correct_answer, correct_answer + 1],
                           key=f"question_{idx}",
                           index=None)  # This ensures no option is pre-selected

    # Update the session state with the selected answer
    st.session_state.user_answers[f"question_{idx}"] = user_answer

# Button to submit all answers at once
submit_button = st.button("Submit Answers")

# When the submit button is pressed, show results
if submit_button:
    score = 0
    # Calculate score based on user answers
    for idx, (_, correct_answer) in enumerate(st.session_state.questions):
        if st.session_state.user_answers[f"question_{idx}"] == correct_answer:
            score += 1

    # Display the result
    st.write(f"You got {score} out of 10 correct!")