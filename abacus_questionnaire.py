# -*- coding: utf-8 -*-
"""Abacus Questionnaire.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/11x2Tmk6sRytQ5AgC374JGoxTXgB8z4T-
"""

import streamlit as st
import random

# Abacus Question Generator Code
def generate_question():
    num1 = random.randint(1, 99)
    num2 = random.randint(1, 99)
    operation = random.choice(['+', '-'])
    question = f"{num1} {operation} {num2}"
    answer = eval(question)
    return question, answer

# Generate 20 questions
questions = []
for _ in range(20):
    question, answer = generate_question()
    questions.append((question, answer))

# Initialize session state if not already set
if 'question_index' not in st.session_state:
    st.session_state.question_index = 0
    st.session_state.student_answers = []

# Function to display a question and capture answer
def display_question():
    # Get the current question and answer
    question, correct_answer = questions[st.session_state.question_index]

    # Display the question and options
    st.write(f"Question {st.session_state.question_index + 1}: {question}")

    with st.form(key=f"question_form_{st.session_state.question_index}"):
        # Form elements
        answer = st.radio("Choose the answer", [correct_answer - 1, correct_answer, correct_answer + 1])
        submit_button = st.form_submit_button("Submit Answer")

        # When the Submit Answer button is pressed
        if submit_button:
            # Store the answer in session state
            st.session_state.student_answers.append((answer, correct_answer))

            # Only move to the next question when the button is pressed
            if st.session_state.question_index < len(questions) - 1:
                st.session_state.question_index += 1
            else:
                # Show results at the end
                score = sum(1 for ans, correct in st.session_state.student_answers if ans == correct)
                st.write(f"You got {score} out of 20 correct!")

# Display the current question
if st.session_state.question_index < len(questions):
    display_question()